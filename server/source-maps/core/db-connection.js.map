{"version":3,"sources":["core/db-connection.ts"],"names":[],"mappings":";AAAA,IAAO,SAAS,WAAW,WAAW,CAAC,CAAC;AACxC,4BAA2B,eAE3B,CAAC,CAFyC;AAY1C;IAEI,IAAI,MAAM,GAAc;QACpB,IAAI,EAAC,yBAAW,CAAC,OAAO;QACxB,QAAQ,EAAE,yBAAW,CAAC,OAAO;QAC7B,QAAQ,EAAE,yBAAW,CAAC,WAAW;QACjC,QAAQ,EAAE,yBAAW,CAAC,WAAW;QACjC,IAAI,EAAE,yBAAW,CAAC,OAAO;QACzB,GAAG,EAAE,CAAC,yBAAW,CAAC,MAAM,IAAI,KAAK,CAAC;QAClC,KAAK,EAAE,IAAI;KACd,CAAC;IACF,MAAM,CAAC,MAAM,CAAC;AAClB,CAAC;AAED;IACI,IAAI,MAAM,GAAG,WAAW,EAAE,CAAC;IAC3B,IAAM,SAAS,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAO;QACpF,IAAI,EAAE,MAAM,CAAC,IAAI;QACjB,OAAO,EAAE,UAAU;QACnB,IAAI,EAAE,MAAM,CAAC,IAAI;QACjB,IAAI,EAAE;YACF,GAAG,EAAE,EAAE;YACP,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,KAAK;SACd;QACD,cAAc,EAAE;YACZ,GAAG,EAAE,MAAM,CAAC,GAAG;SAClB;QACD,OAAO,EAAC,IAAI;KACf,CAAC,CAAC;IACH,MAAM,CAAC,SAAS,CAAC;AACrB,CAAC;AAED,iBAAS,gBAAgB,CAAC","file":"../../core/db-connection.js","sourcesContent":["import Sequelize = require('sequelize');\r\nimport {environment } from './environment'\r\n\r\ninterface IDbConfig {\r\n    host: string;\r\n    database: string;\r\n    username: string;\r\n    password: string;\r\n    port: number;\r\n    ssl?: boolean;\r\n    newdb: boolean;\r\n}\r\n\r\nfunction getDbConfig() {\r\n\r\n    var config: IDbConfig = {\r\n        host:environment.DB_HOST, //''127.0.0.1', //for localhost\r\n        database: environment.DB_NAME,\r\n        username: environment.DB_USERNAME, //7/6/17 - db password\r\n        password: environment.DB_PASSWORD,\r\n        port: environment.DB_PORT,\r\n        ssl: (environment.DB_SSL == false),\r\n        newdb: true\r\n    };\r\n    return config;\r\n}\r\n\r\nfunction createConnection() {\r\n    let config = getDbConfig();\r\n    const sequelize = new Sequelize(config.database, config.username, config.password, <any>{\r\n        host: config.host,\r\n        dialect: 'postgres',\r\n        port: config.port,\r\n        pool: {\r\n            max: 10,\r\n            min: 1,\r\n            idle: 10000\r\n        },\r\n        dialectOptions: {\r\n            ssl: config.ssl\r\n        },\r\n        logging:true\r\n    });\r\n    return sequelize;\r\n}\r\n\r\nexport = createConnection;"]}