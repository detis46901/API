{"version":3,"sources":["core/db-connection.ts"],"names":[],"mappings":";AAAA,IAAO,SAAS,WAAW,WAAW,CAAC,CAAC;AACxC,IAAO,WAAW,WAAW,eAAe,CAAC,CAAA;AAY7C;IAEI,IAAI,MAAM,GAAc;QACpB,IAAI,EAAE,WAAW,CAAC,WAAW,CAAC,OAAO;QACrC,QAAQ,EAAE,WAAW,CAAC,WAAW,CAAC,OAAO;QACzC,QAAQ,EAAE,WAAW,CAAC,WAAW,CAAC,WAAW;QAC7C,QAAQ,EAAE,WAAW,CAAC,WAAW,CAAC,WAAW;QAC7C,IAAI,EAAE,WAAW,CAAC,WAAW,CAAC,OAAO;QACrC,GAAG,EAAE,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM,IAAI,IAAI,CAAC;QAC7C,KAAK,EAAE,IAAI;KACd,CAAC;IACF,MAAM,CAAC,MAAM,CAAC;AAClB,CAAC;AAED;IAEI,IAAI,MAAM,GAAG,WAAW,EAAE,CAAC;IAE3B,IAAI,SAAS,GAAG,IAAI,SAAS,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,QAAQ,EAAO;QAClF,IAAI,EAAE,MAAM,CAAC,IAAI;QACjB,OAAO,EAAE,UAAU;QACnB,IAAI,EAAE,MAAM,CAAC,IAAI;QACjB,IAAI,EAAE;YACF,GAAG,EAAE,EAAE;YACP,GAAG,EAAE,CAAC;YACN,IAAI,EAAE,KAAK;SACd;QACD,cAAc,EAAE;YACZ,GAAG,EAAE,MAAM,CAAC,GAAG;SAClB;QACD,OAAO,EAAC,IAAI;KAGf,CAAC,CAAC;IAEH,MAAM,CAAC,SAAS,CAAC;AACrB,CAAC;AAED,iBAAS,gBAAgB,CAAC","file":"../../core/db-connection.js","sourcesContent":["import Sequelize = require('sequelize');\r\nimport Environment = require('./environment')\r\n\r\ninterface IDbConfig {\r\n    host: string;\r\n    database: string;\r\n    username: string;\r\n    password: string;\r\n    port: number;\r\n    ssl?: boolean;\r\n    newdb: boolean;\r\n}\r\n\r\nfunction getDbConfig() {\r\n\r\n    var config: IDbConfig = {\r\n        host: Environment.environment.DB_HOST, //''127.0.0.1', //for localhost\r\n        database: Environment.environment.DB_NAME,\r\n        username: Environment.environment.DB_USERNAME, //7/6/17 - db password\r\n        password: Environment.environment.DB_PASSWORD,\r\n        port: Environment.environment.DB_PORT,\r\n        ssl: (Environment.environment.DB_SSL == true),\r\n        newdb: true\r\n    };\r\n    return config;\r\n}\r\n\r\nfunction createConnection() {\r\n\r\n    let config = getDbConfig();\r\n\r\n    var sequelize = new Sequelize(config.database, config.username, config.password, <any>{\r\n        host: config.host,\r\n        dialect: 'postgres',\r\n        port: config.port,\r\n        pool: {\r\n            max: 10,\r\n            min: 0,\r\n            idle: 10000\r\n        },\r\n        dialectOptions: {\r\n            ssl: config.ssl\r\n        },\r\n        logging:true\r\n        // SQLite only\r\n        //storage: '../sqllite'\r\n    });\r\n\r\n    return sequelize;\r\n}\r\n\r\nexport = createConnection;"]}